**Section 41: General-purpose timers (TIM15/TIM16/TIM17)**

Updated Figure 480: TIM15 block diagram.

```
Updated Figure 495: Capture/compare channel 1 main circuit? Figure 496:
Output stage of capture/compare channel (channel 1) and Figure 497: Output
stage of capture/compare channel (channel 2 for TIM15).
```
Updated Section 41.4.13: Using the break function.

Removed bit COMDE for TIM16/17.

```
Table 344: TIM16/TIM17 register map and reset values: changed TISEL[3:0]
into TI1SEL[3:0] for TIM16_TISEL and TIM17_TISEL registers.
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


**Revision history RM0433**

3316/3353 RM0433 Rev 8

04-Apr-2019 6 (continued)

**Section 43: Low-power timer (LPTIM)**

Updated Section 43.4.9: Timeout function.

```
Updated WAVE bit description in Section 43.7.4: LPTIM configuration register
(LPTIM_CFGR).
```
**Section 47: Inter-integrated circuit (I2C) interface**

Updated Section 47.3: I2C implementation.

```
Updated Section 47.7.2: I2C control register 2 (I2C_CR2), Section 47.7.3: I2C
own address 1 register (I2C_OAR1), and Section 47.7.8: I2C interrupt clear
register (I2C_ICR).
```
```
Section 48: Universal synchronous/asynchronous receiver transmitter
(USART/UART)
```
Replaced DSI_NSS by DIS_NSS in USART_CR1.

Changed USART_TDR into USART_RDR in Figure 590: Reception using DMA.

Updated Section 48.5.4: USART FIFOs and thresholds.

```
Updated RTO bitfield description in Section 48.7.7: USART receiver timeout
register (USART_RTOR).
```
Section 48.7.9: USART interrupt and status register [alternate] (USART_ISR):

Updated ABRF, IDLE bit descriptions

For FIFO disabled only: updated RXNE and ORE bit descriptions

```
Changed NFCF to NECF in Section 48.7.11: USART interrupt flag clear register
(USART_ICR).
```
Table 399: USART register map and reset values:

```
USART_CR1: bit 12 changed to M0, bit 7 changed to TXEIE/TXFNFIE, bit 5
changed to RXNEIE/RXFNEIE.
```
USART_ISR: changed TXE bit to TXE/TXFNF and RXNE into RXNE/RXFNE

Corrected USART_ISR/TCGBT reset value for FIFO disabled.

```
Section 49: Low-power universal asynchronous receiver transmitter
(LPUART)
```
```
Changed LPUART_TDR into LPUART_RDR in Figure 604: Reception using
DMA.
```
Updated Section 48.5.4: USART FIFOs and thresholds.

Updated Section 49.5.1: LPUART control register 1 [alternate] (LPUART_CR1).

```
Corrected WUS bitfield length and changed RXFTCFG to TXFTCFG (bit 31 to
29) in Section 49.5.4: LPUART control register 3 (LPUART_CR3).
```
Section 49.5.8: LPUART interrupt and status register [alternate] (LPUART_ISR):

Updated IDLE bit descriptions

FIFO enabled only: updated reset value

```
Changed NFCF to NECF in Section 49.5.9: LPUART interrupt flag clear register
(LPUART_ICR).
```
Table 405: LPUART register map and reset values

LPUART_CR1: bit 12 changed to M0, bit 5 changed to RXNEIE/RXFNEIE.

LPUART_ISR: changed TXE bit to TXE/TXFNF

Corrected LPUART_ISR reset value and bits 7 and 5 names.

**Table 628. Document revision history (continued)**

**Date Revision Changes**


RM0433 Rev 8 3317/3353

**RM0433 Revision history**

###### 3338

04-Apr-2019 6 (continued)

**Section 50: Serial peripheral interface (SPI)**

Table 413: SPI register map and reset values:

SPI2S_SR: Changed bit 7 to CRCE.

SPI2S_I2SCFGR: added DATFMT (bit 14)

**Section 54: Management data input/output (MDIOS)**

```
In Table 441: MDIOS register map and reset values, for MDIOS_CR register,
changed bit 3 to EIE and added DPC (bit 7).
```
**Section 55: Secure digital input/output MultiMediaCard interface (SDMMC)**

Replaced HOLD by DHOLD in the whole document.

Updated Figure 702: SDMMC block diagram and Table 446: SDMMC pins.

Updated Figure 711: CLKMUX unit.

```
Updated Wait_S in Section : Data path and Table 456: Data path status flags
and clear bits.
```
Updated Section 55.5.3: General description.

Updated Section : Stream operation and CMD12.

Added Section 55.8: SDMMC interrupts.

```
Updated Section 55.9.10: SDMMC data counter register (SDMMC_DCNTR),
Section 55.9.11: SDMMC status register (SDMMC_STAR) and Section 55.9.15:
SDMMC data FIFO registers x (SDMMC_FIFORx).
```
Updated Table 468: SDMMC register map.

**Section 56: Controller area network with flexible data rate (FDCAN)**

```
Updated Section 56.4.7: FDCAN nominal bit timing and prescaler register
(FDCAN_NBTP), Section 56.4.12: FDCAN error counter register
(FDCAN_ECR), Section 56.4.15: FDCAN interrupt register (FDCAN_IR),
Section 56.4.37: FDCAN Tx buffer request pending register (FDCAN_TXBRP)
and Section 56.4.64: FDCAN TT trigger select register (FDCAN_TTTS).
```
Updated Table 495: FDCAN register map and reset values.

Updated Table 495: FDCAN register map and reset values.

```
Section 58: Ethernet (ETH): media access control (MAC) with DMA
controller
```
Added Figure 789: Supported PHY interfaces.

Removed reference to AV standard in Section 58.1: Ethernet introduction.

**Section 60: Debug infrastructure**

```
Changed ETF RAM size to 4 Kbytes in Section 60.5.5: Embedded trace FIFO
(ETF) and Section : ETF RAM size register (ETF_RSZ).
```
```
Added revision V and updated reset value in Section : DBGMCU identity code
register (DBGMCU_IDC).
```
```
Renamed WDGLSD1 into DBG_IWDG1 in Section : DBGMCU APB4 peripheral
freeze register (DBGMCU_APB4FZ1).
```
```
Prefixed all bits names in Section : DBGMCU APB1L peripheral freeze register
(DBGMCU_APB1LFZ1), Section : DBGMCU APB2 peripheral freeze register
(DBGMCU_APB2FZ1) and Section : DBGMCU APB4 peripheral freeze register
(DBGMCU_APB4FZ1) by ‘DBG_’.
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


**Revision history RM0433**

3318/3353 RM0433 Rev 8

25-Feb-2020 7

```
Added RAMECC1/2/3 boundary addresses in Section Table 12.: Register
boundary addresses STM32H7-Shark. Updated Section : Error code correction
(ECC) and Section : Embedded bootloader.
```
Added _Section 3: RAM ECC monitoring (RAMECC)_

**_Section 4: Embedded flash memory (FLASH)_**

```
Restricted Table 26 to STM32H745xI/747xI/755xI/757xI and added Table 28:
Flash memory organization on STM32H745xG/STM32H747xG devices.
```
```
Added VOS0 range to Table 34: FLASH recommended number of wait states
and programming delay.
```
```
Added VOS0 range to Table 34: FLASH recommended number of wait states
and programming delay.
```
```
Added CRCRDERRIE1/2 in FLASH_CR1/2 registers, together with
Section 4.7.10: CRC read error (CRCRDERR).
```
```
Section 5: Secure memory management (SMM) (former Secure internal
Flash memory)
```
Updated **exitSecureArea** in _Section 5.4.2: Secure area exiting service_.

**_Section 27: Power control (PWR)_**

```
Moved LSI from backup to VDD domain in Figure 169: Power supply overview.
Added Figure 181: Switching VCORE from VOS1 to VOS0 in Section : VOS0
activation/deactivation sequence.
Updated list of GPIOs which use is restricted in Section 15.4.4: Backup domain.
Updated ACTVOSRDY bit definition in Section 27.8.2: PWR control status
register 1 (PWR_CSR1). Updated VOSRDY bit definition in Section 27.8.6:
PWR D3 domain control register (PWR_D3CR).
```
**_Section 7: Low-power SRD domain application example_**

Replaced LINUART1 by LPUART1.

```
Updated Figure 41: Timing diagram of SRD SRAM-to-LPUART1 transfer with
BDMA2 and SRD domain in Autonomous mode.
```
Updated section _Section : EXTI programming_.

```
Updated DMAMUX2_C0CR value for DMAMUX2 SYNC0 in Table 48: BDMA2
and DMAMUX2 initialization sequence (DMAMUX2_INIT). Renamed Table 50
into “LPUART1 start programming.
```
**_Section 49: Reset and Clock Control (RCC)_**

Renamed adc_ker_ck into adc_ker_ck_inputs.

```
Added note on RTC/AWU and updated USB1ULPI and ADC1/2/3 maximum
allowed frequencies for VOS0/1/2/3 in Table 345: Kernel clock distribution
overview.
```
**_Section 12: Clock recovery system (CRS)_**

```
Added Section 12.3: CRS implementation. Updated Section 12.7.1: CRS control
register (CRS_CR). Updated Table 125: CRS register map and reset values.
```
**_Section 8: General-purpose I/Os (GPIO)_**

```
In Section 8: General-purpose I/Os (GPIO) changed to analog the mode
in which most of the I/O ports are configured during and just after reset.
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


RM0433 Rev 8 3319/3353

**RM0433 Revision history**

###### 3338

25-Feb-2020 7 (continued)

**_Section 16: Direct memory access controller (DMA)_**

```
Change Bit 20 to TRBUFF instead of reserved in Section 16.5.5: DMA stream x
configuration register (DMA_SxCR).
```
**_Section 23: Flexible memory controller (FMC)_**

```
Updated Section : General transaction rules to clarify the behavior of the FMC
when AXI transaction data size is different from the device data width and add
the case of unaligned addresses.
```
```
Replaced FMC_CLK by fmc_ker_ck in the formulas of Section : WAIT
management in asynchronous accesses.
```
**_Section 23: Quad-SPI interface (QUADSPI)_**

Updated _Section 23.4.4: QUADSPI signal interface protocol modes_.

```
Updated Section 23.4.11: QUADSPI configuration and Section 23.6.1:
QUADSPI control register (QUADSPI_CR) adding ‘when setting QUADSPI
interface in DDR mode, the prescaler must be set with a division ratio of 2 or
more’ paragraph.
```
```
Updated FTHRES[4:0] bits description of Section 23.6.1: QUADSPI control
register (QUADSPI_CR) for IP_XACT compliance.
```
```
Added note in Section 23.6.6: QUADSPI communication configuration register
(QUADSPI_CCR).
```
Updated _Section 23.6.7: QUADSPI address register (QUADSPI_AR)_.

```
Changed FLEVEL[6:0] by FLEVEL[5:0] in Section 23.6.18: QUADSPI register
map.
```
**_Section 27: Analog-to-digital converters (ADC)_**

```
Removed note related to connection to DFSDM limited to ADC1 and ADC2, and
added adc_sclk in Figure 155: ADC block diagram. Removed VREF+ and
VREF- ranges, and added adc_sclk in Table 201: ADC input/output pins.
```
```
Updated Section 27.4.3: ADC clocks to distinguish between revision Y and V,
and renamed adc_ker_ck into adc_ker_ck_inputs.
```
Updated _Section 27.3: ADC implementation_.

Updated _Section : BOOST control_.

Updated _Section 27.4.3: ADC clocks_ to distinguish between revision Y and V.

Updated _Section 27.4.12: Channel selection (SQRx, JSQRx)_.

```
Updated Section : ADC overrun (OVR, OVRMOD). Added case of FIFO
overflow in Section : Managing a sequence of conversion without using the
DMA.
```
```
Updated Section : Single ADC operating modes support when oversampling to
remove the mention that the offset correction is not supported in oversampling
mode.
```
```
Section 27.7.2: ADC x common control register (ADC_CCR)(ADCx_CCR)
(x=1/2) (x=1/2 or 3) :
```
- Reworded DUAL[4:0] to remove duplicate configurations
- Renamed VSENSEEN into TSEN
- Updated CKMODE[1:0] bitfield definition to distinguish between revision Y
    and V.

```
Updated Section 27.6.3: ADC control register (ADC_CR) to distinguish between
revision Y and V (one or two BOOST bit(s,) respectively).
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


**Revision history RM0433**

3320/3353 RM0433 Rev 8

25-Feb-2020 7 (continued)

Section 27: Analog-to-digital converters (ADC) (continued)

```
Updated RES[2:0] bitfield definition in Section 27.6.4: ADC configuration
register (ADC_CFGR).
```
```
Updated LSHIFT[3:0] corresponding to the “Shift left 14-bits” configuration in
Section 27.6.5: ADC configuration register 2 (ADC_CFGR2).
```
```
Reworded JEXTEN[1:0] to remove duplicate 00 configuration for JEXTEN[1:0]
in Section 27.6.16: ADC injected sequence register (ADC_JSQR).
```
Updated Section 27.6.26: ADC calibration factors register (ADC_CALFACT).

Removed ADC_CALCLKR register.

Section 35: Digital-to-analog converter (DAC)

```
Replaced sample and hold clock (lsi_ck and lse_ck when available) by
dac_hold_ck.
```
Updated Section 35.3: DAC implementation.

Updated Figure 284: Dual-channel DAC block diagram.

```
Section 35.4.2: DAC pins and internal signals: added DAC interconnection
table, changed dac_chx_trg[0:15] into dac_chx_trg[1:15] (trigger 0 corresponds
to the SW trigger) in block diagram and Table 128: DAC internal input/output
signals.
```
```
Updated Figure 287: Timing diagram for conversion with trigger disabled
TEN = 0 to make it independent from the bus (AHB or APB).
```
Removed Tables Trigger selection from Section 35.4.8: DAC trigger selection

```
Updated Section : Sample and hold mode to indicate that the lsi_ck/lse_ck
(when available) must not be stopped when Sample and hold mode enabled.
```
Updated supply voltages in Section 35.4.13: DAC channel buffer calibration.

```
Updated TSELx bitfield description in Section 35.7.1: DAC control register
(DAC_CR) register to add the correspondence between TSELx configurations
and dac_chx_trgy.
```
```
Updated CStop mode description for DAC1 in Section 35.5: DAC in low-power
modes.
```
Updated Section 35.6: DAC interrupts.

Section 33: Comparator (COMP)

```
Removed condition on OR_CFG and changed OR bits to reserved in
Section 33.7.3: Comparator option register (COMP_OR).
```
Section 28: Digital filter for sigma delta modulators (DFSDM)

Updated Table 206: DFSDM break connection.

Removed all “ADC1 and ADC2 only” notes and footnotes.

```
Updated Section 28.7: DFSDM channel y registers (y=0..3), Section 28.7.5:
DFSDM channel y data input register (DFSDM_CHyDATINR) and Section 28.8:
DFSDM filter x module registers (x=0..1).
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


RM0433 Rev 8 3321/3353

**RM0433 Revision history**

###### 3338

25-Feb-2020 7 (continued)

```
Section 46: JPEG codec (JPEG)
Updated Section 46.5.5: JPEG codec configuration register x (JPEG_CONFRx).
bit 1 and bit 0 description.
```
Section 48: True random number generator (RNG)

Updated Section 48.1: Introduction and Section 48.2: RNG main features.

```
Updated Section 48.3.3: Random number generation and note in
Section 48.3.5: RNG operation. Updated Section 48.5: RNG processing time
and Section 48.6: RNG entropy source validation.
```
Updated Section 48.7.3: RNG data register (RNG_DR).

Section 33: Cryptographic processor (CRYP)

```
Updated number of clock cycles for TDES in Section 33.2: CRYP main
features.n
```
```
Removed flowcharts (Nonuser) in Section 33.4.5: CRYP procedure to perform a
cipher operation.
```
Updated Section 33.4.18: CRYP key registers.

```
Section 33.5: CRYP interrupts: removed Figure CRYP interrupt mapping
diagram and updated Table 268: CRYP interrupt requests.
```
```
Section 33.6: CRYP processing time: updated Table 269: Processing latency for
ECB, CBC and CTR and Table 270: Processing time (in clock cycle) for GCM
and CCM per 128-bit block.
```
```
Section 51: Hash processor (HASH)
Message size changed to 2^64 -1 in Section 51.1: Introduction and
Section 51.4.3: About secure hash algorithms. Added Section 51.3: HASH
implementation. Updated Figure 477: HASH block diagram.
Updated Figure 478: Message data swapping feature.
Updated Section 51.4.8: HASH suspend/resume operations.
Renamed HASH_HRx registers located at address offset 0x0C into Section :
HASH aliased digest register x (HASH_HRAx). Updated ALGO description in
Section 51.7.1: HASH control register (HASH_CR). Specified value returned by
reading Section 51.7.2: HASH data input register (HASH_DIN).
```
Section 23: Advanced-control timers (TIM1)

Updated Figure 114: Advanced-control timer block diagram.

Updated Section 23.3.3: Repetition counter.

Updated Section 23.3.16: Using the break function.

```
Updated Section 23.4.2: TIM1 control register 2 (TIM1_CR2TIMx_CR2)N/A.
Aligned TS[2:0] field in Section 23.4.3: TIM1 slave mode control register
(TIM1_SMCRTIMx_SMCR)N/A. Updated Section 23.4.5: TIM1 status register
(TIM1_SRTIMx_SR)N/A. Updated Section 23.4.6: TIM1 event generation
register (TIM1_EGRTIMx_EGR)N/A. Updated Table 176: TIM1 register map and
reset values and Table 177: TIM8 register map and reset values. Updated
Section 23.3.29: Debug mode.
```
Section 24: General-purpose timer (TIM2)

```
Updated Section 24.4.12: TIM2 counter (TIM2_CNT). Updated Table 173: TIM2
register map and reset values.
```
**Table 628. Document revision history (continued)**

**Date Revision Changes**


**Revision history RM0433**

3322/3353 RM0433 Rev 8

25-Feb-2020 7 (continued)

**_Section 39: General-purpose timers (TIM12/TIM13/TIM14)_**

```
Updated Figure 412: General-purpose timer block diagram (TIM12) and
Figure 426: Capture/compare channel 1 main circuit.
```
Updated _Figure 427: Output stage of capture/compare channel (channel 1)_.

```
Updated Section 39.4.1: TIM12 control register 1 (TIM12_CR1) , Section 39.4.5:
TIM12 status register (TIM12_SR) and Section 39.5.5: TIMx capture/compare
mode register 1 (TIMx_CCMR1)(x = 13 to 14).
```
**_Section 25: General-purpose timers (TIM16/TIM17)_**

Updated _Figure 223: TIM15 block diagram_.

Updated _Figure 237: Capture/compare channel 1 main circuit_.

```
Updated: Section 25.5.2: TIM15 control register 2 (TIM15_CR2) , Section 25.5.5:
TIM15 status register (TIM15_SR) , Section 25.5.9: TIM15 capture/compare
enable register (TIM15_CCER) , Section 25.4.2: TIMx control register 2
(TIMx_CR2)(x = 16 to 17) , Section 25.4.4: TIMx status register (TIMx_SR)(x =
16 to 17) , Section 25.4.6: TIMx capture/compare mode register 1
(TIMx_CCMR1)(x = 16 to 17) and Section 25.4.8: TIMx capture/compare enable
register (TIMx_CCER)(x = 16 to 17). Replaced DT[7:0] by DTG[7:0] in
Table 184: TIM15 register map and reset values and Table 183: TIM16/TIM17
register map and reset values.
```

